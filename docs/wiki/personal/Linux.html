


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="/wiki.css">

<title>Linux</title>

</head>

<div class="site-title"><a href="./">Personal Wiki</a> by <a href="https://philipkd.com/">Philip Dhingra</a></div>

<div class="entry">

<div class="page-title">Linux</div>

<h1>bash</h1>

<p><code>PS1="\[$(tput setaf 7)\]\u: \w &gt; \[$(tput sgr0)\]"</code> (<a href="https://www.cyberciti.biz/faq/bash-shell-change-the-color-of-my-shell-prompt-under-linux-or-unix/">flags</a>: white, user, folder, reset color)</p>

<p><code>.bashrc</code> is loaded if you don't "log in" (ex: <code>su</code>, <code>screen</code>)<br />
<code>.bash_profile</code> for when you do (e.g., <code>su -</code>, <code>ssh</code>), (non-interactive shells, like <code>sh</code>, log in)</p>

<p>Environment variables carry over when you don't log in.</p>

<p><em>Note: Mac runs both.</em></p>

<h1>chmod</h1>

<p>user-group-others<br />
read = 4, write = 2, execute = 1<br />
ex: <code>chmod 600 keys</code></p>

<h1>cron</h1>

<p><code>EDITOR=nano crontab -e</code> then five <code>*</code>s</p>

<h2>best practices</h2>

<ol>
<li>use a script</li>
<li>use absolute path to script</li>
<li>include <code>cd $(dirname $0)</code> at top of script to change to script's current directory</li>
<li>see log in <code>grep CRON /var/log/syslog</code></li>
<li>append <code>2&gt;&amp;1</code> to redirect stderr to stdout</li>
<li>may need <code>sudo apt-get install postfix</code> and <code>sudo tail -f /var/mail/&lt;user&gt;</code> to <a href="https://askubuntu.com/questions/222512/cron-info-no-mta-installed-discarding-output-error-in-the-syslog">see errors</a></li>
<li>use <code>MAILTO=""</code> and <code>&gt; /dev/null</code> to <a href="https://unix.stackexchange.com/questions/100722/how-do-i-completely-silence-a-cronjob-to-dev-null">silence errors</a></li>
</ol>

<h1>curl</h1>

<p><code>curl --silent https://some.url --output file</code></p>

<h1><a href="disk_management">disk management</a></h1>

<h1>environment variables</h1>

<p><code>export NAME=VALUE</code><br />
<code>echo $NAME</code>  </p>

<h1>datetime</h1>

<p><code>timedatectl list-timezones</code>
<code>sudo timedatectl set-timezone America/Los_Angeles</code></p>

<p><a href="https://www.cyberciti.biz/faq/linux-unix-formatting-dates-for-display/">in-shell</a>: <code>$(date +'%Y-%m-%d %H:%M:%S')</code></p>

<h1>find folder</h1>

<p><code>find . -type d -name 'foldernam'</code>  </p>

<h1>grep</h1>

<p><code>grep -i 'text' file</code> (<code>-i</code> is case-insensitive, and ' not needed)</p>

<h1>jobs on zsh</h1>

<p><code>kill %1</code></p>

<h1>mkdir</h1>

<p><code>-p</code> creates parents if necessary, and no error if exists already</p>

<h1>screen</h1>

<p>Ctrl+a, d to detatch<br />
<code>screen -ls</code> or Ctrl+a, "<br />
<code>screen -r</code> to reattach</p>

<h1>shutting down</h1>

<p><code>sudo shutdown now</code> (<a href="https://opensource.com/article/19/7/reboot-linux">safe</a>)</p>

<h1>source</h1>

<p><code>.</code> alias for <code>source</code> runs the bash script in the current shell vs. another shell</p>

<h1>SSH</h1>

<p><code>ssh-keygen -R 35.230.81.237</code> resets known_hosts</p>

<p><code>ssh -L 5901:127.0.0.1:5901 -C -N -l ubuntu 35.153.231.137</code><br />
-L specifies the port bindings (local/remote)<br />
-C enables compression<br />
-N says don't execute a remote command<br />
-l specifies remote login name  </p>

<h1>superuser</h1>

<p><code>su - username</code> switches users (don't specify username to get root, and <code>-</code> is an alias for <code>-l</code> which means login)<br />
<code>sudo su -</code> works on some systems like AWS or GCP because you are part of a group that allows for passwordless <code>sudo</code>  </p>

<h1>Ubuntu updates</h1>

<p><code>sudo apt-get update</code> updates package lists<br />
<code>sudo apt-get upgrade</code> upgrades every installed package</p>

<h1>unzip</h1>

<p><code>unzip -l zipfile</code> shows contents<br />
<code>unzip zipfile -d folder</code> unzips to folder<br />
<code>unzip -n zipfile</code> doesn't overwrite<br />
<code>unzip -q zipfile</code> hides output</p>

<h1><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-18-04">VNC Server</a></h1>

<p><code>vncserver -kill :1</code><br />
<code>vncsnapshot -passwd vncsnapshotpass localhost:1 "./snapshots/$(date +"%Y-%m-%d %H:%M:%S").png"</code>  </p>

<h1>wget</h1>

<p><code>wget url</code><br />
<code>wget -O filename https://some.url</code>  </p>

<br/>
<a href="https://licensebuttons.net/l/by/4.0/"><img src="https://licensebuttons.net/l/by/4.0/80x15.png"></a>